{"version":3,"sources":["../src/reporter.ts"],"names":["WDIOReporter","TestPlanItClient"],"mappings":"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","file":"index.js","sourcesContent":["import WDIOReporter, { type RunnerStats, type SuiteStats, type TestStats, type AfterCommandArgs } from '@wdio/reporter';\nimport { TestPlanItClient } from '@testplanit/api';\nimport type { NormalizedStatus, JUnitResultType } from '@testplanit/api';\nimport type { TestPlanItReporterOptions, TrackedTestResult, ReporterState } from './types.js';\n\n/**\n * WebdriverIO Reporter for TestPlanIt\n *\n * Reports test results directly to your TestPlanIt instance.\n *\n * @example\n * ```javascript\n * // wdio.conf.js\n * export const config = {\n *   reporters: [\n *     ['@testplanit/wdio-reporter', {\n *       domain: 'https://testplanit.example.com',\n *       apiToken: process.env.TESTPLANIT_API_TOKEN,\n *       projectId: 1,\n *       runName: 'E2E Tests - {date}',\n *     }]\n *   ]\n * }\n * ```\n */\nexport default class TestPlanItReporter extends WDIOReporter {\n  private client: TestPlanItClient;\n  private reporterOptions: TestPlanItReporterOptions;\n  private state: ReporterState;\n  private currentSuite: string[] = [];\n  private initPromise: Promise<void> | null = null;\n  private pendingOperations: Set<Promise<void>> = new Set();\n  private reportedResultCount = 0;\n  private detectedFramework: string | null = null;\n  private currentTestUid: string | null = null;\n  private currentCid: string | null = null;\n  private pendingScreenshots: Map<string, Buffer[]> = new Map();\n\n  /**\n   * WebdriverIO uses this getter to determine if the reporter has finished async operations.\n   * The test runner will wait for this to return true before terminating.\n   */\n  get isSynchronised(): boolean {\n    return this.pendingOperations.size === 0;\n  }\n\n  constructor(options: TestPlanItReporterOptions) {\n    super(options);\n\n    this.reporterOptions = {\n      caseIdPattern: /\\[(\\d+)\\]/g,\n      autoCreateTestCases: false,\n      createFolderHierarchy: false,\n      uploadScreenshots: true,\n      includeStackTrace: true,\n      completeRunOnFinish: true,\n      oneReport: true,\n      timeout: 30000,\n      maxRetries: 3,\n      verbose: false,\n      ...options,\n    };\n\n    // Validate required options\n    if (!this.reporterOptions.domain) {\n      throw new Error('TestPlanIt reporter: domain is required');\n    }\n    if (!this.reporterOptions.apiToken) {\n      throw new Error('TestPlanIt reporter: apiToken is required');\n    }\n    if (!this.reporterOptions.projectId) {\n      throw new Error('TestPlanIt reporter: projectId is required');\n    }\n\n    // Initialize API client\n    this.client = new TestPlanItClient({\n      baseUrl: this.reporterOptions.domain,\n      apiToken: this.reporterOptions.apiToken,\n      timeout: this.reporterOptions.timeout,\n      maxRetries: this.reporterOptions.maxRetries,\n    });\n\n    // Initialize state - testRunId will be resolved during initialization\n    this.state = {\n      testRunId: typeof this.reporterOptions.testRunId === 'number' ? this.reporterOptions.testRunId : undefined,\n      resolvedIds: {},\n      results: new Map(),\n      caseIdMap: new Map(),\n      testRunCaseMap: new Map(),\n      folderPathMap: new Map(),\n      statusIds: {},\n      initialized: false,\n      testSuiteStats: {\n        tests: 0,\n        failures: 0,\n        errors: 0,\n        skipped: 0,\n        time: 0,\n      },\n      stats: {\n        testCasesFound: 0,\n        testCasesCreated: 0,\n        testCasesMoved: 0,\n        foldersCreated: 0,\n        resultsPassed: 0,\n        resultsFailed: 0,\n        resultsSkipped: 0,\n        screenshotsUploaded: 0,\n        screenshotsFailed: 0,\n        apiErrors: 0,\n        apiRequests: 0,\n        startTime: new Date(),\n      },\n    };\n  }\n\n  /**\n   * Log a message if verbose mode is enabled\n   */\n  private log(message: string, ...args: unknown[]): void {\n    if (this.reporterOptions.verbose) {\n      console.log(`[TestPlanIt] ${message}`, ...args);\n    }\n  }\n\n  /**\n   * Log an error (always logs, not just in verbose mode)\n   */\n  private logError(message: string, error?: unknown): void {\n    const errorMsg = error instanceof Error ? error.message : String(error ?? '');\n    const stack = error instanceof Error && error.stack ? `\\n${error.stack}` : '';\n    console.error(`[TestPlanIt] ERROR: ${message}`, errorMsg, stack);\n  }\n\n  /**\n   * Track an async operation to prevent the runner from terminating early.\n   * The operation is added to pendingOperations and removed when complete.\n   * WebdriverIO checks isSynchronised and waits until all operations finish.\n   */\n  private trackOperation(operation: Promise<void>): void {\n    this.pendingOperations.add(operation);\n    operation.finally(() => {\n      this.pendingOperations.delete(operation);\n    });\n  }\n\n  /**\n   * Initialize the reporter (create test run, fetch statuses)\n   */\n  private async initialize(): Promise<void> {\n    // If already initialized successfully, return immediately\n    if (this.state.initialized) return;\n\n    // If we have a previous error, throw it again to prevent retrying\n    if (this.state.initError) {\n      throw this.state.initError;\n    }\n\n    // If initialization is in progress, wait for it\n    if (this.initPromise) return this.initPromise;\n\n    this.initPromise = this.doInitialize();\n    return this.initPromise;\n  }\n\n  private async doInitialize(): Promise<void> {\n    try {\n      // Log initialization start (only happens when we have results to report)\n      this.log('Initializing reporter...');\n      this.log(`  Domain: ${this.reporterOptions.domain}`);\n      this.log(`  Project ID: ${this.reporterOptions.projectId}`);\n\n      // Resolve any string IDs to numeric IDs\n      this.log('Resolving option IDs...');\n      await this.resolveOptionIds();\n\n      // Fetch status mappings\n      this.log('Fetching status mappings...');\n      await this.fetchStatusMappings();\n\n      // Create or validate test run\n      if (!this.state.testRunId) {\n        await this.createTestRun();\n        this.log(`Created test run with ID: ${this.state.testRunId}`);\n      } else {\n        // Validate existing test run\n        try {\n          const testRun = await this.client.getTestRun(this.state.testRunId);\n          this.log(`Using existing test run: ${testRun.name} (ID: ${testRun.id})`);\n        } catch (error) {\n          throw new Error(`Test run ${this.state.testRunId} not found or not accessible`);\n        }\n      }\n\n      this.state.initialized = true;\n      this.log('Reporter initialized successfully');\n    } catch (error) {\n      this.state.initError = error instanceof Error ? error : new Error(String(error));\n      this.logError('Failed to initialize reporter:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Resolve option names to numeric IDs\n   */\n  private async resolveOptionIds(): Promise<void> {\n    const projectId = this.reporterOptions.projectId;\n\n    // Resolve testRunId if it's a string\n    if (typeof this.reporterOptions.testRunId === 'string') {\n      const testRun = await this.client.findTestRunByName(projectId, this.reporterOptions.testRunId);\n      if (!testRun) {\n        throw new Error(`Test run not found: \"${this.reporterOptions.testRunId}\"`);\n      }\n      this.state.testRunId = testRun.id;\n      this.state.resolvedIds.testRunId = testRun.id;\n      this.log(`Resolved test run \"${this.reporterOptions.testRunId}\" -> ${testRun.id}`);\n    }\n\n    // Resolve configId if it's a string\n    if (typeof this.reporterOptions.configId === 'string') {\n      const config = await this.client.findConfigurationByName(projectId, this.reporterOptions.configId);\n      if (!config) {\n        throw new Error(`Configuration not found: \"${this.reporterOptions.configId}\"`);\n      }\n      this.state.resolvedIds.configId = config.id;\n      this.log(`Resolved configuration \"${this.reporterOptions.configId}\" -> ${config.id}`);\n    } else if (typeof this.reporterOptions.configId === 'number') {\n      this.state.resolvedIds.configId = this.reporterOptions.configId;\n    }\n\n    // Resolve milestoneId if it's a string\n    if (typeof this.reporterOptions.milestoneId === 'string') {\n      const milestone = await this.client.findMilestoneByName(projectId, this.reporterOptions.milestoneId);\n      if (!milestone) {\n        throw new Error(`Milestone not found: \"${this.reporterOptions.milestoneId}\"`);\n      }\n      this.state.resolvedIds.milestoneId = milestone.id;\n      this.log(`Resolved milestone \"${this.reporterOptions.milestoneId}\" -> ${milestone.id}`);\n    } else if (typeof this.reporterOptions.milestoneId === 'number') {\n      this.state.resolvedIds.milestoneId = this.reporterOptions.milestoneId;\n    }\n\n    // Resolve stateId if it's a string\n    if (typeof this.reporterOptions.stateId === 'string') {\n      const state = await this.client.findWorkflowStateByName(projectId, this.reporterOptions.stateId);\n      if (!state) {\n        throw new Error(`Workflow state not found: \"${this.reporterOptions.stateId}\"`);\n      }\n      this.state.resolvedIds.stateId = state.id;\n      this.log(`Resolved workflow state \"${this.reporterOptions.stateId}\" -> ${state.id}`);\n    } else if (typeof this.reporterOptions.stateId === 'number') {\n      this.state.resolvedIds.stateId = this.reporterOptions.stateId;\n    }\n\n    // Resolve parentFolderId if it's a string\n    if (typeof this.reporterOptions.parentFolderId === 'string') {\n      let folder = await this.client.findFolderByName(projectId, this.reporterOptions.parentFolderId);\n      if (!folder) {\n        // If createFolderHierarchy is enabled, create the parent folder\n        if (this.reporterOptions.createFolderHierarchy) {\n          this.log(`Parent folder \"${this.reporterOptions.parentFolderId}\" not found, creating it...`);\n          folder = await this.client.createFolder({\n            projectId,\n            name: this.reporterOptions.parentFolderId,\n          });\n          this.log(`Created parent folder \"${this.reporterOptions.parentFolderId}\" -> ${folder.id}`);\n        } else {\n          throw new Error(`Folder not found: \"${this.reporterOptions.parentFolderId}\"`);\n        }\n      }\n      this.state.resolvedIds.parentFolderId = folder.id;\n      this.log(`Resolved folder \"${this.reporterOptions.parentFolderId}\" -> ${folder.id}`);\n    } else if (typeof this.reporterOptions.parentFolderId === 'number') {\n      this.state.resolvedIds.parentFolderId = this.reporterOptions.parentFolderId;\n    }\n\n    // Resolve templateId if it's a string\n    if (typeof this.reporterOptions.templateId === 'string') {\n      const template = await this.client.findTemplateByName(projectId, this.reporterOptions.templateId);\n      if (!template) {\n        throw new Error(`Template not found: \"${this.reporterOptions.templateId}\"`);\n      }\n      this.state.resolvedIds.templateId = template.id;\n      this.log(`Resolved template \"${this.reporterOptions.templateId}\" -> ${template.id}`);\n    } else if (typeof this.reporterOptions.templateId === 'number') {\n      this.state.resolvedIds.templateId = this.reporterOptions.templateId;\n    }\n\n    // Resolve tagIds if they contain strings\n    if (this.reporterOptions.tagIds && this.reporterOptions.tagIds.length > 0) {\n      this.state.resolvedIds.tagIds = await this.client.resolveTagIds(projectId, this.reporterOptions.tagIds);\n      this.log(`Resolved tags: ${this.state.resolvedIds.tagIds.join(', ')}`);\n    }\n  }\n\n  /**\n   * Fetch status ID mappings from TestPlanIt\n   */\n  private async fetchStatusMappings(): Promise<void> {\n    const statuses: NormalizedStatus[] = ['passed', 'failed', 'skipped', 'blocked'];\n\n    for (const status of statuses) {\n      const statusId = await this.client.getStatusId(this.reporterOptions.projectId, status);\n      if (statusId) {\n        this.state.statusIds[status] = statusId;\n        this.log(`Status mapping: ${status} -> ${statusId}`);\n      }\n    }\n\n    if (!this.state.statusIds.passed || !this.state.statusIds.failed) {\n      throw new Error('Could not find required status mappings (passed/failed) in TestPlanIt');\n    }\n  }\n\n  /**\n   * Map test status to JUnit result type\n   */\n  private mapStatusToJUnitType(status: 'passed' | 'failed' | 'skipped' | 'pending'): JUnitResultType {\n    switch (status) {\n      case 'passed':\n        return 'PASSED';\n      case 'failed':\n        return 'FAILURE';\n      case 'skipped':\n      case 'pending':\n        return 'SKIPPED';\n      default:\n        return 'FAILURE';\n    }\n  }\n\n  /**\n   * Create the JUnit test suite for this test run\n   */\n  private async createJUnitTestSuite(): Promise<void> {\n    if (this.state.testSuiteId) {\n      return; // Already created\n    }\n\n    if (!this.state.testRunId) {\n      throw new Error('Cannot create JUnit test suite without a test run ID');\n    }\n\n    const runName = this.formatRunName(this.reporterOptions.runName || '{suite} - {date} {time}');\n\n    this.log('Creating JUnit test suite...');\n\n    const testSuite = await this.client.createJUnitTestSuite({\n      testRunId: this.state.testRunId,\n      name: runName,\n      time: 0, // Will be updated incrementally\n      tests: 0,\n      failures: 0,\n      errors: 0,\n      skipped: 0,\n    });\n\n    this.state.testSuiteId = testSuite.id;\n    this.log('Created JUnit test suite with ID:', testSuite.id);\n  }\n\n  /**\n   * Map WebdriverIO framework name to TestPlanIt test run type\n   */\n  private getTestRunType(): TestPlanItReporterOptions['testRunType'] {\n    // If explicitly set by user, use that\n    if (this.reporterOptions.testRunType) {\n      return this.reporterOptions.testRunType;\n    }\n\n    // Auto-detect from WebdriverIO framework config\n    if (this.detectedFramework) {\n      const framework = this.detectedFramework.toLowerCase();\n      if (framework === 'mocha') return 'MOCHA';\n      if (framework === 'cucumber') return 'CUCUMBER';\n      // jasmine and others map to REGULAR\n      return 'REGULAR';\n    }\n\n    // Default fallback\n    return 'MOCHA';\n  }\n\n  /**\n   * Create a new test run\n   */\n  private async createTestRun(): Promise<void> {\n    const runName = this.formatRunName(this.reporterOptions.runName || '{suite} - {date} {time}');\n    const testRunType = this.getTestRunType();\n\n    this.log('Creating test run:', runName, '(type:', testRunType + ')');\n\n    const testRun = await this.client.createTestRun({\n      projectId: this.reporterOptions.projectId,\n      name: runName,\n      testRunType,\n      configId: this.state.resolvedIds.configId,\n      milestoneId: this.state.resolvedIds.milestoneId,\n      stateId: this.state.resolvedIds.stateId,\n    });\n\n    this.state.testRunId = testRun.id;\n    this.log('Created test run with ID:', testRun.id);\n  }\n\n  /**\n   * Format the run name with placeholders\n   */\n  private formatRunName(template: string): string {\n    const now = new Date();\n    const date = now.toISOString().split('T')[0];\n    const time = now.toTimeString().split(' ')[0];\n    const browser = this.state.capabilities?.browserName || 'unknown';\n    const platform = this.state.capabilities?.platformName || process.platform;\n\n    // Get spec file name from currentSpec (e.g., \"/path/to/test.spec.ts\" -> \"test.spec.ts\")\n    let spec = 'unknown';\n    if (this.currentSpec) {\n      const parts = this.currentSpec.split('/');\n      spec = parts[parts.length - 1] || 'unknown';\n      // Remove common extensions for cleaner names\n      spec = spec.replace(/\\.(spec|test)\\.(ts|js|mjs|cjs)$/, '');\n    }\n\n    // Get the root suite name (first describe block)\n    const suite = this.currentSuite[0] || 'Tests';\n\n    return template\n      .replace('{date}', date)\n      .replace('{time}', time)\n      .replace('{browser}', browser)\n      .replace('{platform}', platform)\n      .replace('{spec}', spec)\n      .replace('{suite}', suite);\n  }\n\n  /**\n   * Parse case IDs from test title using the configured pattern\n   * @example With default pattern: \"[1761] [1762] should load the page\" -> [1761, 1762]\n   * @example With C-prefix pattern: \"C12345 C67890 should load the page\" -> [12345, 67890]\n   */\n  private parseCaseIds(title: string): { caseIds: number[]; cleanTitle: string } {\n    const pattern = this.reporterOptions.caseIdPattern || /\\[(\\d+)\\]/g;\n    const regex = typeof pattern === 'string' ? new RegExp(pattern, 'g') : new RegExp(pattern.source, 'g');\n    const caseIds: number[] = [];\n    let match: RegExpExecArray | null;\n\n    while ((match = regex.exec(title)) !== null) {\n      // Find the first capturing group that has a value (supports patterns with multiple groups)\n      for (let i = 1; i < match.length; i++) {\n        if (match[i]) {\n          caseIds.push(parseInt(match[i], 10));\n          break;\n        }\n      }\n    }\n\n    // Remove matched patterns from title\n    const cleanTitle = title.replace(regex, '').trim().replace(/\\s+/g, ' ');\n\n    return { caseIds, cleanTitle };\n  }\n\n  /**\n   * Get the full suite path as a string\n   */\n  private getFullSuiteName(): string {\n    return this.currentSuite.join(' > ');\n  }\n\n  /**\n   * Create a unique key for a test case\n   */\n  private createCaseKey(suiteName: string, testName: string): string {\n    return `${suiteName}::${testName}`;\n  }\n\n  // ============================================================================\n  // WebdriverIO Reporter Hooks\n  // ============================================================================\n\n  onRunnerStart(runner: RunnerStats): void {\n    this.log('Runner started:', runner.cid);\n    this.state.capabilities = runner.capabilities as WebdriverIO.Capabilities;\n\n    // Auto-detect the test framework from WebdriverIO config\n    // This is accessed via runner.config.framework (e.g., 'mocha', 'cucumber', 'jasmine')\n    const config = runner.config as { framework?: string } | undefined;\n    if (config?.framework) {\n      this.detectedFramework = config.framework;\n      this.log('Detected framework:', this.detectedFramework);\n    }\n\n    // Don't initialize here - wait until we have actual test results to report\n    // This avoids creating empty test runs for specs with no matching tests\n  }\n\n  onSuiteStart(suite: SuiteStats): void {\n    if (suite.title) {\n      this.currentSuite.push(suite.title);\n      this.log('Suite started:', this.getFullSuiteName());\n    }\n  }\n\n  onSuiteEnd(suite: SuiteStats): void {\n    if (suite.title) {\n      this.log('Suite ended:', this.getFullSuiteName());\n      this.currentSuite.pop();\n    }\n  }\n\n  onTestStart(test: TestStats): void {\n    this.log('Test started:', test.title);\n    // Track the current test for screenshot association\n    const { cleanTitle } = this.parseCaseIds(test.title);\n    const suiteName = this.getFullSuiteName();\n    const fullTitle = suiteName ? `${suiteName} > ${cleanTitle}` : cleanTitle;\n    this.currentTestUid = `${test.cid}_${fullTitle}`;\n    this.currentCid = test.cid;\n  }\n\n  /**\n   * Capture screenshots from WebdriverIO commands\n   */\n  onAfterCommand(commandArgs: AfterCommandArgs): void {\n    // Check if this is a screenshot command\n    if (!this.reporterOptions.uploadScreenshots) {\n      return;\n    }\n\n    // WebdriverIO uses 'takeScreenshot' as the command name or '/screenshot' endpoint\n    const isScreenshotCommand =\n      commandArgs.command === 'takeScreenshot' ||\n      commandArgs.command === 'saveScreenshot' ||\n      commandArgs.endpoint?.includes('/screenshot');\n\n    if (!isScreenshotCommand) {\n      return;\n    }\n\n    this.log(`Screenshot command detected: ${commandArgs.command}, endpoint: ${commandArgs.endpoint}`);\n\n    // For saveScreenshot, the result is the file path, not base64 data\n    // We need to handle both takeScreenshot (returns base64) and saveScreenshot (saves to file)\n    const result = commandArgs.result as Record<string, unknown> | string | undefined;\n    const resultValue = (typeof result === 'object' && result !== null ? result.value : result) ?? result;\n\n    if (!resultValue) {\n      this.log('No result value in screenshot command');\n      return;\n    }\n\n    // The result should be base64-encoded screenshot data\n    const screenshotData = resultValue as string;\n    if (typeof screenshotData !== 'string') {\n      this.log(`Screenshot result is not a string: ${typeof screenshotData}`);\n      return;\n    }\n\n    // Check if this looks like a file path rather than base64 data\n    // File paths start with / (Unix) or drive letter like C:\\ (Windows)\n    // Base64 PNG data starts with \"iVBORw0KGgo\" (PNG header)\n    const looksLikeFilePath =\n      screenshotData.startsWith('/') ||\n      /^[A-Za-z]:[\\\\\\/]/.test(screenshotData) ||\n      screenshotData.startsWith('./') ||\n      screenshotData.startsWith('../');\n\n    if (looksLikeFilePath) {\n      this.log(`Screenshot result appears to be a file path: ${screenshotData.substring(0, 100)}`);\n      return;\n    }\n\n    // Store the screenshot associated with the current test\n    if (this.currentTestUid) {\n      const buffer = Buffer.from(screenshotData, 'base64');\n      const existing = this.pendingScreenshots.get(this.currentTestUid) || [];\n      existing.push(buffer);\n      this.pendingScreenshots.set(this.currentTestUid, existing);\n      this.log('Captured screenshot for test:', this.currentTestUid, `(${buffer.length} bytes)`);\n    } else {\n      this.log('No current test UID to associate screenshot with');\n    }\n  }\n\n  onTestPass(test: TestStats): void {\n    this.handleTestEnd(test, 'passed');\n  }\n\n  onTestFail(test: TestStats): void {\n    this.handleTestEnd(test, 'failed');\n  }\n\n  onTestSkip(test: TestStats): void {\n    this.handleTestEnd(test, 'skipped');\n  }\n\n  /**\n   * Handle test completion\n   */\n  private handleTestEnd(test: TestStats, status: 'passed' | 'failed' | 'skipped'): void {\n    const { caseIds, cleanTitle } = this.parseCaseIds(test.title);\n    const suiteName = this.getFullSuiteName();\n    const suitePath = [...this.currentSuite]; // Copy the current suite hierarchy\n    const fullTitle = suiteName ? `${suiteName} > ${cleanTitle}` : cleanTitle;\n    const uid = `${test.cid}_${fullTitle}`;\n\n    // Calculate duration from timestamps for reliability\n    // WebdriverIO's test.duration can be inconsistent in some versions\n    const startTime = new Date(test.start).getTime();\n    const endTime = test.end ? new Date(test.end).getTime() : Date.now();\n    const durationMs = endTime - startTime;\n\n    // Format WebdriverIO command output if available\n    let commandOutput: string | undefined;\n    if (test.output && test.output.length > 0) {\n      commandOutput = test.output\n        .map((o) => {\n          const parts: string[] = [];\n          if (o.method) parts.push(`[${o.method}]`);\n          if (o.endpoint) parts.push(o.endpoint);\n          if (o.result !== undefined) {\n            const resultStr = typeof o.result === 'string' ? o.result : JSON.stringify(o.result);\n            // Truncate long results\n            parts.push(resultStr.length > 200 ? resultStr.substring(0, 200) + '...' : resultStr);\n          }\n          return parts.join(' ');\n        })\n        .join('\\n');\n    }\n\n    const result: TrackedTestResult = {\n      caseId: caseIds[0], // Primary case ID\n      suiteName,\n      suitePath,\n      testName: cleanTitle,\n      fullTitle,\n      originalTitle: test.title,\n      status,\n      duration: durationMs,\n      errorMessage: test.error?.message,\n      stackTrace: this.reporterOptions.includeStackTrace ? test.error?.stack : undefined,\n      startedAt: new Date(test.start),\n      finishedAt: new Date(endTime),\n      browser: this.state.capabilities?.browserName,\n      platform: this.state.capabilities?.platformName || process.platform,\n      screenshots: [],\n      retryAttempt: test.retries || 0,\n      uid,\n      specFile: this.currentSpec,\n      commandOutput,\n    };\n\n    this.state.results.set(uid, result);\n    this.log(`Test ${status}:`, cleanTitle, caseIds.length > 0 ? `(Case IDs: ${caseIds.join(', ')})` : '');\n\n    // Report result asynchronously - track operation so WebdriverIO waits for completion\n    const reportPromise = this.reportResult(result, caseIds);\n    this.trackOperation(reportPromise);\n  }\n\n  /**\n   * Report a single test result to TestPlanIt\n   */\n  private async reportResult(result: TrackedTestResult, caseIds: number[]): Promise<void> {\n    try {\n      // Check if this result can be reported BEFORE initializing\n      // This prevents creating empty test runs for tests without case IDs\n      if (caseIds.length === 0 && !this.reporterOptions.autoCreateTestCases) {\n        console.warn(`[TestPlanIt] WARNING: Skipping \"${result.testName}\" - no case ID found and autoCreateTestCases is disabled. Set autoCreateTestCases: true to automatically find or create test cases by name.`);\n        return;\n      }\n\n      // Now we know this result can be reported, so initialize if needed\n      await this.initialize();\n\n      if (!this.state.testRunId) {\n        this.logError('No test run ID available, skipping result');\n        return;\n      }\n\n      // Create JUnit test suite if not already created\n      await this.createJUnitTestSuite();\n\n      if (!this.state.testSuiteId) {\n        this.logError('No test suite ID available, skipping result');\n        return;\n      }\n\n      // Get or create repository case\n      let repositoryCaseId: number | undefined;\n      const caseKey = this.createCaseKey(result.suiteName, result.testName);\n\n      // DEBUG: Always log key info about this test\n      this.log('DEBUG: Processing test:', result.testName);\n      this.log('DEBUG: suiteName:', result.suiteName);\n      this.log('DEBUG: suitePath:', JSON.stringify(result.suitePath));\n      this.log('DEBUG: caseIds from title:', JSON.stringify(caseIds));\n      this.log('DEBUG: autoCreateTestCases:', this.reporterOptions.autoCreateTestCases);\n      this.log('DEBUG: createFolderHierarchy:', this.reporterOptions.createFolderHierarchy);\n\n      if (caseIds.length > 0) {\n        // Use the provided case ID directly as repository case ID\n        repositoryCaseId = caseIds[0];\n        this.log('DEBUG: Using case ID from title:', repositoryCaseId);\n      } else if (this.reporterOptions.autoCreateTestCases) {\n        // Check cache first\n        if (this.state.caseIdMap.has(caseKey)) {\n          repositoryCaseId = this.state.caseIdMap.get(caseKey);\n          this.log('DEBUG: Found in cache:', caseKey, '->', repositoryCaseId);\n        } else {\n          // Determine the target folder ID\n          let folderId = this.state.resolvedIds.parentFolderId;\n          const templateId = this.state.resolvedIds.templateId;\n\n          this.log('DEBUG: Initial folderId (parentFolderId):', folderId);\n          this.log('DEBUG: templateId:', templateId);\n\n          if (!folderId || !templateId) {\n            this.logError('autoCreateTestCases requires parentFolderId and templateId');\n            return;\n          }\n\n          // Create folder hierarchy based on suite structure if enabled\n          this.log('DEBUG: Checking folder hierarchy - createFolderHierarchy:', this.reporterOptions.createFolderHierarchy, 'suitePath.length:', result.suitePath.length);\n          if (this.reporterOptions.createFolderHierarchy && result.suitePath.length > 0) {\n            const folderPathKey = result.suitePath.join(' > ');\n            this.log('DEBUG: Will create folder hierarchy for path:', folderPathKey);\n\n            // Check folder cache first\n            if (this.state.folderPathMap.has(folderPathKey)) {\n              folderId = this.state.folderPathMap.get(folderPathKey)!;\n              this.log('Using cached folder ID for path:', folderPathKey, '->', folderId);\n            } else {\n              // Create the folder hierarchy\n              this.log('Creating folder hierarchy:', result.suitePath.join(' > '));\n              this.log('DEBUG: Calling findOrCreateFolderPath with projectId:', this.reporterOptions.projectId, 'suitePath:', JSON.stringify(result.suitePath), 'parentFolderId:', this.state.resolvedIds.parentFolderId);\n              const folder = await this.client.findOrCreateFolderPath(\n                this.reporterOptions.projectId,\n                result.suitePath,\n                this.state.resolvedIds.parentFolderId\n              );\n              folderId = folder.id;\n              this.state.folderPathMap.set(folderPathKey, folderId);\n              this.log('Created/found folder:', folder.name, '(ID:', folder.id + ')');\n            }\n          } else {\n            this.log('DEBUG: Skipping folder hierarchy - createFolderHierarchy:', this.reporterOptions.createFolderHierarchy, 'suitePath.length:', result.suitePath.length);\n          }\n\n          this.log('DEBUG: Final folderId for test case:', folderId);\n\n          const { testCase, action } = await this.client.findOrCreateTestCase({\n            projectId: this.reporterOptions.projectId,\n            folderId,\n            templateId,\n            name: result.testName,\n            className: result.suiteName || undefined,\n            source: 'API',\n            automated: true,\n          });\n\n          // Track statistics based on action\n          if (action === 'found') {\n            this.state.stats.testCasesFound++;\n          } else if (action === 'created') {\n            this.state.stats.testCasesCreated++;\n          } else if (action === 'moved') {\n            this.state.stats.testCasesMoved++;\n          }\n\n          repositoryCaseId = testCase.id;\n          this.state.caseIdMap.set(caseKey, repositoryCaseId);\n          this.log(`${action === 'found' ? 'Found' : action === 'created' ? 'Created' : 'Moved'} test case:`, testCase.id, testCase.name, 'in folder:', folderId);\n        }\n      } else {\n        this.log('DEBUG: autoCreateTestCases is false, not creating test case');\n      }\n\n      if (!repositoryCaseId) {\n        this.log('No repository case ID, skipping result');\n        return;\n      }\n\n      // Get or create test run case\n      let testRunCaseId: number | undefined;\n      const runCaseKey = `${this.state.testRunId}_${repositoryCaseId}`;\n\n      if (this.state.testRunCaseMap.has(runCaseKey)) {\n        testRunCaseId = this.state.testRunCaseMap.get(runCaseKey);\n      } else {\n        const testRunCase = await this.client.findOrAddTestCaseToRun({\n          testRunId: this.state.testRunId,\n          repositoryCaseId,\n        });\n        testRunCaseId = testRunCase.id;\n        this.state.testRunCaseMap.set(runCaseKey, testRunCaseId);\n        this.log('Added case to run:', testRunCaseId);\n      }\n\n      // Get status ID for the JUnit result\n      const statusId = this.state.statusIds[result.status] || this.state.statusIds.failed!;\n\n      // Map status to JUnit result type\n      const junitType = this.mapStatusToJUnitType(result.status);\n\n      // Build error message/content for failed tests\n      let message: string | undefined;\n      let content: string | undefined;\n\n      if (result.errorMessage) {\n        message = result.errorMessage;\n      }\n      if (result.stackTrace) {\n        content = result.stackTrace;\n      }\n\n      // Create the JUnit test result\n      // WebdriverIO provides duration in milliseconds, JUnit expects seconds\n      const durationInSeconds = result.duration / 1000;\n      const junitResult = await this.client.createJUnitTestResult({\n        testSuiteId: this.state.testSuiteId,\n        repositoryCaseId,\n        type: junitType,\n        message,\n        content,\n        statusId,\n        time: durationInSeconds,\n        executedAt: result.finishedAt,\n        file: result.specFile,\n        systemOut: result.commandOutput,\n      });\n\n      this.log('Created JUnit test result:', junitResult.id, '(type:', junitType + ')');\n      this.reportedResultCount++;\n\n      // Store the JUnit result ID for deferred screenshot upload\n      // Screenshots taken in afterTest hook won't be available yet, so we upload them in onRunnerEnd\n      result.junitResultId = junitResult.id;\n\n      // Update suite statistics and reporter stats\n      this.state.testSuiteStats.tests++;\n      this.state.testSuiteStats.time += durationInSeconds;\n      if (result.status === 'failed') {\n        this.state.testSuiteStats.failures++;\n        this.state.stats.resultsFailed++;\n      } else if (result.status === 'skipped') {\n        this.state.testSuiteStats.skipped++;\n        this.state.stats.resultsSkipped++;\n      } else {\n        this.state.stats.resultsPassed++;\n      }\n    } catch (error) {\n      this.state.stats.apiErrors++;\n      this.logError(`Failed to report result for ${result.testName}:`, error);\n    }\n  }\n\n  /**\n   * Called when the entire test session ends\n   */\n  async onRunnerEnd(runner: RunnerStats): Promise<void> {\n    // If no tests were tracked and no initialization was started, silently skip\n    // This handles specs with no matching tests (all filtered out by grep, etc.)\n    if (this.state.results.size === 0 && !this.initPromise) {\n      this.log('No test results to report, skipping');\n      return;\n    }\n\n    this.log('Runner ended, waiting for initialization and pending results...');\n\n    // Wait for initialization to complete (might still be in progress)\n    if (this.initPromise) {\n      try {\n        await this.initPromise;\n      } catch {\n        // Error already captured in state.initError\n      }\n    }\n\n    // Wait for any remaining pending operations\n    // (WebdriverIO waits via isSynchronised, but we also wait here for safety)\n    await Promise.allSettled([...this.pendingOperations]);\n\n    // Check if initialization failed\n    if (this.state.initError) {\n      console.error('\\n[TestPlanIt] FAILED: Reporter initialization failed');\n      console.error(`  Error: ${this.state.initError.message}`);\n      console.error('  No results were reported to TestPlanIt.');\n      console.error('  Please check your configuration and API connectivity.');\n      return;\n    }\n\n    // If no test run was created (no reportable results), silently skip\n    if (!this.state.testRunId) {\n      this.log('No test run created, skipping summary');\n      return;\n    }\n\n    // If no results were actually reported to TestPlanIt, silently skip\n    // This handles the case where tests ran but none had valid case IDs\n    if (this.reportedResultCount === 0) {\n      this.log('No results were reported to TestPlanIt, skipping summary');\n      return;\n    }\n\n    // Upload any pending screenshots\n    // Screenshots are uploaded here (deferred) because afterTest hooks run after onTestFail/onTestPass,\n    // so screenshots taken in afterTest wouldn't be available during reportResult\n    if (this.reporterOptions.uploadScreenshots && this.pendingScreenshots.size > 0) {\n      this.log(`Uploading screenshots for ${this.pendingScreenshots.size} test(s)...`);\n\n      // Create upload promises for all screenshots and track them\n      // This ensures WebdriverIO waits for uploads to complete (via isSynchronised)\n      const uploadPromises: Promise<void>[] = [];\n\n      for (const [uid, screenshots] of this.pendingScreenshots.entries()) {\n        const result = this.state.results.get(uid);\n        if (!result?.junitResultId) {\n          this.log(`Skipping screenshots for ${uid} - no JUnit result ID`);\n          continue;\n        }\n\n        this.log(`Uploading ${screenshots.length} screenshot(s) for test:`, result.testName);\n        for (let i = 0; i < screenshots.length; i++) {\n          const uploadPromise = (async () => {\n            try {\n              const fileName = `screenshot_${i + 1}_${Date.now()}.png`;\n              this.log(`Starting upload of ${fileName} (${screenshots[i].length} bytes) to JUnit result ${result.junitResultId}...`);\n              await this.client.uploadJUnitAttachment(\n                result.junitResultId!,\n                screenshots[i],\n                fileName,\n                'image/png'\n              );\n              this.state.stats.screenshotsUploaded++;\n              this.log(`Uploaded screenshot ${i + 1}/${screenshots.length} for ${result.testName}`);\n            } catch (uploadError) {\n              this.state.stats.screenshotsFailed++;\n              const errorMessage = uploadError instanceof Error ? uploadError.message : String(uploadError);\n              const errorStack = uploadError instanceof Error ? uploadError.stack : undefined;\n              this.logError(`Failed to upload screenshot ${i + 1}:`, errorMessage);\n              if (errorStack) {\n                this.logError('Stack trace:', errorStack);\n              }\n            }\n          })();\n\n          // Track this operation so WebdriverIO waits for it\n          this.trackOperation(uploadPromise);\n          uploadPromises.push(uploadPromise);\n        }\n      }\n\n      // Wait for all uploads to complete before proceeding\n      await Promise.allSettled(uploadPromises);\n\n      // Clear all pending screenshots\n      this.pendingScreenshots.clear();\n    }\n\n    // Update the JUnit test suite with final statistics\n    // Track this operation to prevent WebdriverIO from terminating early\n    if (this.state.testSuiteId) {\n      const updateSuiteOp = (async () => {\n        try {\n          await this.client.updateJUnitTestSuite(this.state.testSuiteId!, {\n            tests: this.state.testSuiteStats.tests,\n            failures: this.state.testSuiteStats.failures,\n            errors: this.state.testSuiteStats.errors,\n            skipped: this.state.testSuiteStats.skipped,\n            time: this.state.testSuiteStats.time,\n          });\n          this.log('Updated test suite statistics:', this.state.testSuiteStats);\n        } catch (error) {\n          this.logError('Failed to update test suite statistics:', error);\n        }\n      })();\n      this.trackOperation(updateSuiteOp);\n      await updateSuiteOp;\n    }\n\n    // Complete the test run if configured\n    // Track this operation to prevent WebdriverIO from terminating early\n    if (this.reporterOptions.completeRunOnFinish) {\n      const completeRunOp = (async () => {\n        try {\n          await this.client.completeTestRun(this.state.testRunId!, this.reporterOptions.projectId);\n          this.log('Test run completed:', this.state.testRunId);\n        } catch (error) {\n          this.logError('Failed to complete test run:', error);\n        }\n      })();\n      this.trackOperation(completeRunOp);\n      await completeRunOp;\n    }\n\n    // Print summary\n    const stats = this.state.stats;\n    const duration = ((Date.now() - stats.startTime.getTime()) / 1000).toFixed(1);\n    const totalResults = stats.resultsPassed + stats.resultsFailed + stats.resultsSkipped;\n    const totalCases = stats.testCasesFound + stats.testCasesCreated + stats.testCasesMoved;\n\n    console.log('\\n[TestPlanIt] ');\n    console.log('[TestPlanIt] Results Summary');\n    console.log('[TestPlanIt] ');\n    console.log(`[TestPlanIt]   Test Run ID: ${this.state.testRunId}`);\n    console.log(`[TestPlanIt]   Duration: ${duration}s`);\n    console.log('[TestPlanIt]');\n    console.log('[TestPlanIt]   Test Results:');\n    console.log(`[TestPlanIt]      Passed:  ${stats.resultsPassed}`);\n    console.log(`[TestPlanIt]      Failed:  ${stats.resultsFailed}`);\n    console.log(`[TestPlanIt]      Skipped: ${stats.resultsSkipped}`);\n    console.log(`[TestPlanIt]     Total:     ${totalResults}`);\n\n    if (this.reporterOptions.autoCreateTestCases && totalCases > 0) {\n      console.log('[TestPlanIt]');\n      console.log('[TestPlanIt]   Test Cases:');\n      console.log(`[TestPlanIt]     Found (existing): ${stats.testCasesFound}`);\n      console.log(`[TestPlanIt]     Created (new):    ${stats.testCasesCreated}`);\n      if (stats.testCasesMoved > 0) {\n        console.log(`[TestPlanIt]     Moved (restored): ${stats.testCasesMoved}`);\n      }\n    }\n\n    if (this.reporterOptions.uploadScreenshots && (stats.screenshotsUploaded > 0 || stats.screenshotsFailed > 0)) {\n      console.log('[TestPlanIt]');\n      console.log('[TestPlanIt]   Screenshots:');\n      console.log(`[TestPlanIt]     Uploaded: ${stats.screenshotsUploaded}`);\n      if (stats.screenshotsFailed > 0) {\n        console.log(`[TestPlanIt]     Failed:   ${stats.screenshotsFailed}`);\n      }\n    }\n\n    if (stats.apiErrors > 0) {\n      console.log('[TestPlanIt]');\n      console.log(`[TestPlanIt]    API Errors: ${stats.apiErrors}`);\n    }\n\n    console.log('[TestPlanIt]');\n    console.log(`[TestPlanIt]   View results: ${this.reporterOptions.domain}/projects/runs/${this.reporterOptions.projectId}/${this.state.testRunId}`);\n    console.log('[TestPlanIt] \\n');\n  }\n\n  /**\n   * Get the current state (for debugging)\n   */\n  getState(): ReporterState {\n    return this.state;\n  }\n}\n"]}