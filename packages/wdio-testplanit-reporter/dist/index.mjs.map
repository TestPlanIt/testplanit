{"version":3,"sources":["../src/reporter.ts"],"names":[],"mappings":"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","file":"index.mjs","sourcesContent":["import WDIOReporter, { type RunnerStats, type SuiteStats, type TestStats } from '@wdio/reporter';\nimport { TestPlanItClient, TestPlanItError } from '@testplanit/api';\nimport type { NormalizedStatus } from '@testplanit/api';\nimport type { TestPlanItReporterOptions, TrackedTestResult, ReporterState, ResolvedIds } from './types.js';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\n/**\n * WebdriverIO Reporter for TestPlanIt\n *\n * Reports test results directly to your TestPlanIt instance.\n *\n * @example\n * ```javascript\n * // wdio.conf.js\n * export const config = {\n *   reporters: [\n *     ['@testplanit/wdio-reporter', {\n *       domain: 'https://testplanit.example.com',\n *       apiToken: process.env.TESTPLANIT_API_TOKEN,\n *       projectId: 1,\n *       runName: 'E2E Tests - {date}',\n *     }]\n *   ]\n * }\n * ```\n */\nexport default class TestPlanItReporter extends WDIOReporter {\n  private client: TestPlanItClient;\n  private reporterOptions: TestPlanItReporterOptions;\n  private state: ReporterState;\n  private currentSuite: string[] = [];\n  private initPromise: Promise<void> | null = null;\n  private pendingResults: Promise<void>[] = [];\n\n  constructor(options: TestPlanItReporterOptions) {\n    super(options);\n\n    this.reporterOptions = {\n      caseIdPattern: /\\[(\\d+)\\]/g,\n      autoCreateTestCases: false,\n      uploadScreenshots: true,\n      includeConsoleLogs: false,\n      includeStackTrace: true,\n      completeRunOnFinish: true,\n      oneReport: true,\n      timeout: 30000,\n      maxRetries: 3,\n      verbose: false,\n      ...options,\n    };\n\n    // Validate required options\n    if (!this.reporterOptions.domain) {\n      throw new Error('TestPlanIt reporter: domain is required');\n    }\n    if (!this.reporterOptions.apiToken) {\n      throw new Error('TestPlanIt reporter: apiToken is required');\n    }\n    if (!this.reporterOptions.projectId) {\n      throw new Error('TestPlanIt reporter: projectId is required');\n    }\n\n    // Initialize API client\n    this.client = new TestPlanItClient({\n      baseUrl: this.reporterOptions.domain,\n      apiToken: this.reporterOptions.apiToken,\n      timeout: this.reporterOptions.timeout,\n      maxRetries: this.reporterOptions.maxRetries,\n    });\n\n    // Initialize state - testRunId will be resolved during initialization\n    this.state = {\n      testRunId: typeof this.reporterOptions.testRunId === 'number' ? this.reporterOptions.testRunId : undefined,\n      resolvedIds: {},\n      results: new Map(),\n      caseIdMap: new Map(),\n      testRunCaseMap: new Map(),\n      statusIds: {},\n      initialized: false,\n    };\n  }\n\n  /**\n   * Log a message if verbose mode is enabled\n   */\n  private log(message: string, ...args: unknown[]): void {\n    if (this.reporterOptions.verbose) {\n      console.log(`[TestPlanIt] ${message}`, ...args);\n    }\n  }\n\n  /**\n   * Log an error\n   */\n  private logError(message: string, error?: unknown): void {\n    console.error(`[TestPlanIt] ${message}`, error instanceof Error ? error.message : error);\n  }\n\n  /**\n   * Initialize the reporter (create test run, fetch statuses)\n   */\n  private async initialize(): Promise<void> {\n    if (this.state.initialized) return;\n    if (this.initPromise) return this.initPromise;\n\n    this.initPromise = this.doInitialize();\n    return this.initPromise;\n  }\n\n  private async doInitialize(): Promise<void> {\n    try {\n      this.log('Initializing reporter...');\n\n      // Resolve any string IDs to numeric IDs\n      await this.resolveOptionIds();\n\n      // Fetch status mappings\n      await this.fetchStatusMappings();\n\n      // Create or validate test run\n      if (!this.state.testRunId) {\n        await this.createTestRun();\n      } else {\n        // Validate existing test run\n        try {\n          const testRun = await this.client.getTestRun(this.state.testRunId);\n          this.log('Using existing test run:', testRun.name);\n        } catch (error) {\n          throw new Error(`Test run ${this.state.testRunId} not found or not accessible`);\n        }\n      }\n\n      this.state.initialized = true;\n      this.log('Reporter initialized successfully. Test Run ID:', this.state.testRunId);\n    } catch (error) {\n      this.state.initError = error instanceof Error ? error : new Error(String(error));\n      this.logError('Failed to initialize reporter:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Resolve option names to numeric IDs\n   */\n  private async resolveOptionIds(): Promise<void> {\n    const projectId = this.reporterOptions.projectId;\n\n    // Resolve testRunId if it's a string\n    if (typeof this.reporterOptions.testRunId === 'string') {\n      const testRun = await this.client.findTestRunByName(projectId, this.reporterOptions.testRunId);\n      if (!testRun) {\n        throw new Error(`Test run not found: \"${this.reporterOptions.testRunId}\"`);\n      }\n      this.state.testRunId = testRun.id;\n      this.state.resolvedIds.testRunId = testRun.id;\n      this.log(`Resolved test run \"${this.reporterOptions.testRunId}\" -> ${testRun.id}`);\n    }\n\n    // Resolve configId if it's a string\n    if (typeof this.reporterOptions.configId === 'string') {\n      const config = await this.client.findConfigurationByName(projectId, this.reporterOptions.configId);\n      if (!config) {\n        throw new Error(`Configuration not found: \"${this.reporterOptions.configId}\"`);\n      }\n      this.state.resolvedIds.configId = config.id;\n      this.log(`Resolved configuration \"${this.reporterOptions.configId}\" -> ${config.id}`);\n    } else if (typeof this.reporterOptions.configId === 'number') {\n      this.state.resolvedIds.configId = this.reporterOptions.configId;\n    }\n\n    // Resolve milestoneId if it's a string\n    if (typeof this.reporterOptions.milestoneId === 'string') {\n      const milestone = await this.client.findMilestoneByName(projectId, this.reporterOptions.milestoneId);\n      if (!milestone) {\n        throw new Error(`Milestone not found: \"${this.reporterOptions.milestoneId}\"`);\n      }\n      this.state.resolvedIds.milestoneId = milestone.id;\n      this.log(`Resolved milestone \"${this.reporterOptions.milestoneId}\" -> ${milestone.id}`);\n    } else if (typeof this.reporterOptions.milestoneId === 'number') {\n      this.state.resolvedIds.milestoneId = this.reporterOptions.milestoneId;\n    }\n\n    // Resolve stateId if it's a string\n    if (typeof this.reporterOptions.stateId === 'string') {\n      const state = await this.client.findWorkflowStateByName(projectId, this.reporterOptions.stateId);\n      if (!state) {\n        throw new Error(`Workflow state not found: \"${this.reporterOptions.stateId}\"`);\n      }\n      this.state.resolvedIds.stateId = state.id;\n      this.log(`Resolved workflow state \"${this.reporterOptions.stateId}\" -> ${state.id}`);\n    } else if (typeof this.reporterOptions.stateId === 'number') {\n      this.state.resolvedIds.stateId = this.reporterOptions.stateId;\n    }\n\n    // Resolve parentFolderId if it's a string\n    if (typeof this.reporterOptions.parentFolderId === 'string') {\n      const folder = await this.client.findFolderByName(projectId, this.reporterOptions.parentFolderId);\n      if (!folder) {\n        throw new Error(`Folder not found: \"${this.reporterOptions.parentFolderId}\"`);\n      }\n      this.state.resolvedIds.parentFolderId = folder.id;\n      this.log(`Resolved folder \"${this.reporterOptions.parentFolderId}\" -> ${folder.id}`);\n    } else if (typeof this.reporterOptions.parentFolderId === 'number') {\n      this.state.resolvedIds.parentFolderId = this.reporterOptions.parentFolderId;\n    }\n\n    // Resolve templateId if it's a string\n    if (typeof this.reporterOptions.templateId === 'string') {\n      const template = await this.client.findTemplateByName(projectId, this.reporterOptions.templateId);\n      if (!template) {\n        throw new Error(`Template not found: \"${this.reporterOptions.templateId}\"`);\n      }\n      this.state.resolvedIds.templateId = template.id;\n      this.log(`Resolved template \"${this.reporterOptions.templateId}\" -> ${template.id}`);\n    } else if (typeof this.reporterOptions.templateId === 'number') {\n      this.state.resolvedIds.templateId = this.reporterOptions.templateId;\n    }\n\n    // Resolve tagIds if they contain strings\n    if (this.reporterOptions.tagIds && this.reporterOptions.tagIds.length > 0) {\n      this.state.resolvedIds.tagIds = await this.client.resolveTagIds(projectId, this.reporterOptions.tagIds);\n      this.log(`Resolved tags: ${this.state.resolvedIds.tagIds.join(', ')}`);\n    }\n  }\n\n  /**\n   * Fetch status ID mappings from TestPlanIt\n   */\n  private async fetchStatusMappings(): Promise<void> {\n    const statuses: NormalizedStatus[] = ['passed', 'failed', 'skipped', 'blocked'];\n\n    for (const status of statuses) {\n      const statusId = await this.client.getStatusId(this.reporterOptions.projectId, status);\n      if (statusId) {\n        this.state.statusIds[status] = statusId;\n        this.log(`Status mapping: ${status} -> ${statusId}`);\n      }\n    }\n\n    if (!this.state.statusIds.passed || !this.state.statusIds.failed) {\n      throw new Error('Could not find required status mappings (passed/failed) in TestPlanIt');\n    }\n  }\n\n  /**\n   * Create a new test run\n   */\n  private async createTestRun(): Promise<void> {\n    const runName = this.formatRunName(this.reporterOptions.runName || 'WebdriverIO Test Run - {date} {time}');\n\n    this.log('Creating test run:', runName);\n\n    const testRun = await this.client.createTestRun({\n      projectId: this.reporterOptions.projectId,\n      name: runName,\n      testRunType: 'REGULAR',\n      configId: this.state.resolvedIds.configId,\n      milestoneId: this.state.resolvedIds.milestoneId,\n      stateId: this.state.resolvedIds.stateId,\n    });\n\n    this.state.testRunId = testRun.id;\n    this.log('Created test run with ID:', testRun.id);\n  }\n\n  /**\n   * Format the run name with placeholders\n   */\n  private formatRunName(template: string): string {\n    const now = new Date();\n    const date = now.toISOString().split('T')[0];\n    const time = now.toTimeString().split(' ')[0];\n    const browser = this.state.capabilities?.browserName || 'unknown';\n    const platform = this.state.capabilities?.platformName || process.platform;\n\n    return template\n      .replace('{date}', date)\n      .replace('{time}', time)\n      .replace('{browser}', browser)\n      .replace('{platform}', platform);\n  }\n\n  /**\n   * Parse case IDs from test title using the configured pattern\n   * @example With default pattern: \"[1761] [1762] should load the page\" -> [1761, 1762]\n   * @example With C-prefix pattern: \"C12345 C67890 should load the page\" -> [12345, 67890]\n   */\n  private parseCaseIds(title: string): { caseIds: number[]; cleanTitle: string } {\n    const pattern = this.reporterOptions.caseIdPattern || /\\[(\\d+)\\]/g;\n    const regex = typeof pattern === 'string' ? new RegExp(pattern, 'g') : new RegExp(pattern.source, 'g');\n    const caseIds: number[] = [];\n    let match: RegExpExecArray | null;\n\n    while ((match = regex.exec(title)) !== null) {\n      // Find the first capturing group that has a value (supports patterns with multiple groups)\n      for (let i = 1; i < match.length; i++) {\n        if (match[i]) {\n          caseIds.push(parseInt(match[i], 10));\n          break;\n        }\n      }\n    }\n\n    // Remove matched patterns from title\n    const cleanTitle = title.replace(regex, '').trim().replace(/\\s+/g, ' ');\n\n    return { caseIds, cleanTitle };\n  }\n\n  /**\n   * Get the full suite path as a string\n   */\n  private getFullSuiteName(): string {\n    return this.currentSuite.join(' > ');\n  }\n\n  /**\n   * Create a unique key for a test case\n   */\n  private createCaseKey(suiteName: string, testName: string): string {\n    return `${suiteName}::${testName}`;\n  }\n\n  // ============================================================================\n  // WebdriverIO Reporter Hooks\n  // ============================================================================\n\n  onRunnerStart(runner: RunnerStats): void {\n    this.log('Runner started:', runner.cid);\n    this.state.capabilities = runner.capabilities as WebdriverIO.Capabilities;\n\n    // Start initialization\n    this.initialize().catch((error) => {\n      this.logError('Failed to initialize during runner start:', error);\n    });\n  }\n\n  onSuiteStart(suite: SuiteStats): void {\n    if (suite.title) {\n      this.currentSuite.push(suite.title);\n      this.log('Suite started:', this.getFullSuiteName());\n    }\n  }\n\n  onSuiteEnd(suite: SuiteStats): void {\n    if (suite.title) {\n      this.log('Suite ended:', this.getFullSuiteName());\n      this.currentSuite.pop();\n    }\n  }\n\n  onTestStart(test: TestStats): void {\n    this.log('Test started:', test.title);\n  }\n\n  onTestPass(test: TestStats): void {\n    this.handleTestEnd(test, 'passed');\n  }\n\n  onTestFail(test: TestStats): void {\n    this.handleTestEnd(test, 'failed');\n  }\n\n  onTestSkip(test: TestStats): void {\n    this.handleTestEnd(test, 'skipped');\n  }\n\n  /**\n   * Handle test completion\n   */\n  private handleTestEnd(test: TestStats, status: 'passed' | 'failed' | 'skipped'): void {\n    const { caseIds, cleanTitle } = this.parseCaseIds(test.title);\n    const suiteName = this.getFullSuiteName();\n    const fullTitle = suiteName ? `${suiteName} > ${cleanTitle}` : cleanTitle;\n    const uid = `${test.cid}_${fullTitle}`;\n\n    const result: TrackedTestResult = {\n      caseId: caseIds[0], // Primary case ID\n      suiteName,\n      testName: cleanTitle,\n      fullTitle,\n      originalTitle: test.title,\n      status,\n      duration: test.duration || 0,\n      errorMessage: test.error?.message,\n      stackTrace: this.reporterOptions.includeStackTrace ? test.error?.stack : undefined,\n      startedAt: new Date(test.start),\n      finishedAt: new Date(test.end || Date.now()),\n      browser: this.state.capabilities?.browserName,\n      platform: this.state.capabilities?.platformName || process.platform,\n      screenshots: [],\n      consoleLogs: [],\n      retryAttempt: test.retries || 0,\n      uid,\n    };\n\n    this.state.results.set(uid, result);\n    this.log(`Test ${status}:`, cleanTitle, caseIds.length > 0 ? `(Case IDs: ${caseIds.join(', ')})` : '');\n\n    // Report result asynchronously\n    const reportPromise = this.reportResult(result, caseIds);\n    this.pendingResults.push(reportPromise);\n  }\n\n  /**\n   * Report a single test result to TestPlanIt\n   */\n  private async reportResult(result: TrackedTestResult, caseIds: number[]): Promise<void> {\n    try {\n      // Wait for initialization\n      await this.initialize();\n\n      if (!this.state.testRunId) {\n        this.logError('No test run ID available, skipping result');\n        return;\n      }\n\n      // If no case IDs and auto-create is disabled, skip\n      if (caseIds.length === 0 && !this.reporterOptions.autoCreateTestCases) {\n        console.warn(`[TestPlanIt] WARNING: Skipping \"${result.testName}\" - no case ID found and autoCreateTestCases is disabled. Set autoCreateTestCases: true to automatically find or create test cases by name.`);\n        return;\n      }\n\n      // Get or create repository case\n      let repositoryCaseId: number | undefined;\n      const caseKey = this.createCaseKey(result.suiteName, result.testName);\n\n      if (caseIds.length > 0) {\n        // Use the provided case ID directly as repository case ID\n        repositoryCaseId = caseIds[0];\n      } else if (this.reporterOptions.autoCreateTestCases) {\n        // Check cache first\n        if (this.state.caseIdMap.has(caseKey)) {\n          repositoryCaseId = this.state.caseIdMap.get(caseKey);\n        } else {\n          // Find or create the test case\n          const folderId = this.state.resolvedIds.parentFolderId;\n          const templateId = this.state.resolvedIds.templateId;\n\n          if (!folderId || !templateId) {\n            this.logError('autoCreateTestCases requires parentFolderId and templateId');\n            return;\n          }\n\n          const testCase = await this.client.findOrCreateTestCase({\n            projectId: this.reporterOptions.projectId,\n            folderId,\n            templateId,\n            name: result.testName,\n            className: result.suiteName || undefined,\n            source: 'API',\n            automated: true,\n          });\n\n          repositoryCaseId = testCase.id;\n          this.state.caseIdMap.set(caseKey, repositoryCaseId);\n          this.log('Created/found test case:', testCase.id, testCase.name);\n        }\n      }\n\n      if (!repositoryCaseId) {\n        this.log('No repository case ID, skipping result');\n        return;\n      }\n\n      // Get or create test run case\n      let testRunCaseId: number | undefined;\n      const runCaseKey = `${this.state.testRunId}_${repositoryCaseId}`;\n\n      if (this.state.testRunCaseMap.has(runCaseKey)) {\n        testRunCaseId = this.state.testRunCaseMap.get(runCaseKey);\n      } else {\n        const testRunCase = await this.client.findOrAddTestCaseToRun({\n          testRunId: this.state.testRunId,\n          repositoryCaseId,\n        });\n        testRunCaseId = testRunCase.id;\n        this.state.testRunCaseMap.set(runCaseKey, testRunCaseId);\n        this.log('Added case to run:', testRunCaseId);\n      }\n\n      // Get status ID\n      const statusId = this.state.statusIds[result.status] || this.state.statusIds.failed!;\n\n      // Build evidence/notes\n      const evidence: Record<string, unknown> = {};\n      const notes: Record<string, unknown> = {};\n\n      if (result.errorMessage) {\n        notes['error'] = result.errorMessage;\n      }\n      if (result.stackTrace) {\n        evidence['stackTrace'] = result.stackTrace;\n      }\n      if (result.consoleLogs.length > 0) {\n        evidence['consoleLogs'] = result.consoleLogs;\n      }\n\n      // Create the test result\n      const testResult = await this.client.createTestResult({\n        testRunId: this.state.testRunId,\n        testRunCaseId: testRunCaseId!,\n        statusId,\n        elapsed: result.duration,\n        notes: Object.keys(notes).length > 0 ? notes : undefined,\n        evidence: Object.keys(evidence).length > 0 ? evidence : undefined,\n        attempt: result.retryAttempt + 1,\n      });\n\n      this.log('Created test result:', testResult.id);\n\n      // Upload screenshots if enabled and test failed\n      if (this.reporterOptions.uploadScreenshots && result.status === 'failed' && result.screenshots.length > 0) {\n        for (const screenshotPath of result.screenshots) {\n          await this.uploadScreenshot(testResult.id, screenshotPath);\n        }\n      }\n    } catch (error) {\n      this.logError(`Failed to report result for ${result.testName}:`, error);\n    }\n  }\n\n  /**\n   * Upload a screenshot attachment\n   */\n  private async uploadScreenshot(testRunResultId: number, screenshotPath: string): Promise<void> {\n    try {\n      if (!fs.existsSync(screenshotPath)) {\n        this.log('Screenshot file not found:', screenshotPath);\n        return;\n      }\n\n      const fileBuffer = fs.readFileSync(screenshotPath);\n      const fileName = path.basename(screenshotPath);\n\n      await this.client.uploadAttachment(testRunResultId, fileBuffer, fileName, 'image/png');\n\n      this.log('Uploaded screenshot:', fileName);\n    } catch (error) {\n      this.logError('Failed to upload screenshot:', error);\n    }\n  }\n\n  /**\n   * Called when the entire test session ends\n   */\n  async onRunnerEnd(runner: RunnerStats): Promise<void> {\n    this.log('Runner ended, waiting for pending results...');\n\n    // Wait for all pending results to be reported\n    await Promise.allSettled(this.pendingResults);\n\n    // Complete the test run if configured\n    if (this.reporterOptions.completeRunOnFinish && this.state.testRunId) {\n      try {\n        await this.client.completeTestRun(this.state.testRunId);\n        this.log('Test run completed:', this.state.testRunId);\n      } catch (error) {\n        this.logError('Failed to complete test run:', error);\n      }\n    }\n\n    // Print summary\n    const passed = Array.from(this.state.results.values()).filter((r) => r.status === 'passed').length;\n    const failed = Array.from(this.state.results.values()).filter((r) => r.status === 'failed').length;\n    const skipped = Array.from(this.state.results.values()).filter((r) => r.status === 'skipped').length;\n\n    console.log('\\n[TestPlanIt] Results Summary:');\n    console.log(`  Test Run ID: ${this.state.testRunId}`);\n    console.log(`  Passed: ${passed}`);\n    console.log(`  Failed: ${failed}`);\n    console.log(`  Skipped: ${skipped}`);\n    console.log(`  URL: ${this.reporterOptions.domain}/projects/${this.reporterOptions.projectId}/test-runs/${this.state.testRunId}`);\n  }\n\n  /**\n   * Get the current state (for debugging)\n   */\n  getState(): ReporterState {\n    return this.state;\n  }\n}\n"]}