# Environment variables declared in this file are automatically made available to Prisma.
# See the documentation for more detail: https://pris.ly/d/prisma-schema#accessing-environment-variables-from-the-schema

# Prisma supports the native connection string format for PostgreSQL, MySQL, SQLite, SQL Server, MongoDB and CockroachDB.
# See the documentation for all the connection string options: https://pris.ly/d/connection-strings

# Database Configuration
# For Docker deployment with included PostgreSQL: DATABASE_URL="postgresql://user:password@postgres:5432/testplanit_prod?schema=public"
# For external PostgreSQL server: DATABASE_URL="postgresql://username:password@your-db-host:5432/database_name?schema=public"
# Default connects to the database service defined in docker-compose.yml via the host-mapped port (5432)
DATABASE_URL="postgresql://admin:password@localhost:5432/testplanit?schema=public"

# PostgreSQL connection details (used by db-init service)
# Only needed when using Docker's included PostgreSQL service
# POSTGRES_HOST=postgres
# POSTGRES_PORT=5432

# Next.js Configuration
NEXTAUTH_URL="http://localhost:3000"

# Generate a secure secret for NextAuth (e.g., using `openssl rand -base64 32`)
NEXTAUTH_SECRET=

# Public API URL (optional)
# NEXT_PUBLIC_API_URL="http://localhost:3000/api"

# Email server configuration (optional, for features like password reset)
EMAIL_SERVER_USER=
EMAIL_SERVER_PASSWORD=
EMAIL_SERVER_HOST=
EMAIL_SERVER_PORT=587
EMAIL_FROM=

# Valkey/Redis Configuration
# For Docker deployment with included Valkey: VALKEY_URL="valkey://valkey:6379"
# For external Valkey/Redis server: VALKEY_URL="valkey://your-valkey-host:6379"
# For local development: VALKEY_URL="valkey://localhost:6379"
VALKEY_URL="valkey://localhost:6379"

# Elasticsearch Configuration (optional, for full-text search)
# For Docker deployment with included Elasticsearch: ELASTICSEARCH_NODE=http://elasticsearch:9200
# For external Elasticsearch server: ELASTICSEARCH_NODE=http://your-elasticsearch-host:9200
# For local development: ELASTICSEARCH_NODE=http://localhost:9200
# Leave empty to disable search features
ELASTICSEARCH_NODE=http://localhost:9200

# File Storage Configuration (AWS S3 or MinIO)
# Required for storing attachments and files

# For AWS S3:
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_REGION=us-east-1
# AWS_BUCKET_NAME=your-bucket-name
# Leave AWS_ENDPOINT_URL empty for AWS S3

# For Docker deployment with included MinIO:
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin123
AWS_REGION=us-east-1
AWS_BUCKET_NAME=testplanit

# Internal MinIO endpoint (used by the application server)
# For Docker: AWS_ENDPOINT_URL=http://minio:9000
# For local development: AWS_ENDPOINT_URL=http://localhost:9000
AWS_ENDPOINT_URL=http://minio:9000

# Public MinIO endpoint (for browser-accessible presigned URLs)
# Set this when MinIO is behind a reverse proxy/load balancer with HTTPS
# AWS_PUBLIC_ENDPOINT_URL=https://your-public-minio-url

# Encryption key for sensitive data (generate with `openssl rand -hex 32`)
ENCRYPTION_KEY=

# Default Admin User for Seeding
ADMIN_EMAIL=admin@example.com
ADMIN_NAME="Administrator Account"
ADMIN_PASSWORD=admin

# Test User Password (if running seed in test environment)
# TEST_REGULAR_USER_PASSWORD=password123

# Worker Concurrency Settings (optional)
# Control how many jobs each worker processes concurrently
# Higher values can improve throughput on powerful machines but use more resources

# Testmo Import Worker (memory-intensive, default: 1)
# TESTMO_IMPORT_CONCURRENCY=1

# Sync Worker (I/O-intensive, API rate-limited, default: 2)
# SYNC_CONCURRENCY=2

# Email Worker (I/O-intensive, default: 3)
# EMAIL_CONCURRENCY=3

# Notification Worker (lightweight operations, default: 5)
# NOTIFICATION_CONCURRENCY=5

# Forecast Worker (CPU-intensive but parallelizable, default: 5)
# FORECAST_CONCURRENCY=5

# Magic Select AI Feature Configuration (optional)
# These optional settings control the AI-powered test case selection feature

# Truncation limits for token optimization (characters)
# MAGIC_SELECT_TRUNCATE_CASE_NAME=80
# MAGIC_SELECT_TRUNCATE_TEXT_LONG=100
# MAGIC_SELECT_TRUNCATE_OTHER_FIELD=100
# MAGIC_SELECT_TRUNCATE_ISSUE_DESC=250

# Search pre-filtering configuration
# MAGIC_SELECT_SEARCH_THRESHOLD=250    # Min cases before search pre-filtering kicks in
# MAGIC_SELECT_MIN_KEYWORD_LENGTH=3    # Min keyword length for search
# MAGIC_SELECT_MIN_SEARCH_SCORE=50.0   # Min Elasticsearch score for relevance
# MAGIC_SELECT_MAX_SEARCH_RESULTS=2000 # Max results from search pre-filter
